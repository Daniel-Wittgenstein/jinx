$_PLUGIN.add({"isPlugin":true,"appName":"jinx","compatiblewithVersions":["0.1"],"name":"Simple Interface Demo","id":"simpleInterfaceDemo","author":"Jinx Core Team","copyrightInfo":":(c) 2023 Jinx Core Team","version":"0.0.1","licenseShort":"Public Domain","links":[],"licenseText":"I release this into the public domain.","shortInfo":"Simple Interface Demo plugin.","documentation":"","builtIn":true,"enabledByDefault":false,"logo":"D","licenseTextMustBeIncludedInFinalGame":false,"bundlerOutputFileName":"simpleinterface","implementation":{"js":";(function() {\n\n  const pluginName = \"plugin simpleInterface\"\n  const domPrefix = \"X-simple-interface-plugin-\"\n\n  jin.createEffect(\"loadApp\", initStuff, 20)\n\n  const undoStates = []\n\n  function initStuff() {\n\n    if (jin.simpleInterface) {\n      jin.error(`Namespace clash: plugin jin.simpleInterface exists already?`)\n      return\n    }\n    const el = document.getElementById(\"app\")\n    if (!el) {\n      jin.error(`\\${pluginName}: the plugin cannot work without a div with id \"app\"`)\n      return\n    }\n    const bar = document.createElement('div')\n    bar.style = `margin-bottom: 20px;`\n    bar.innerHTML = `\n      <button id=\"\\${domPrefix}load\">load</button>\n      <button id=\"\\${domPrefix}save\">save</button>\n      <button id=\"\\${domPrefix}erase\">erase</button>\n      <button id=\"\\${domPrefix}undo\">undo</button>\n    `\n    el.prepend(bar)\n    const loadEl = document.getElementById(`\\${domPrefix}load`)\n    loadEl.addEventListener(\"click\", clickLoad)\n    const saveEl = document.getElementById(`\\${domPrefix}save`)\n    saveEl.addEventListener(\"click\", clickSave)\n    const undoEl = document.getElementById(`\\${domPrefix}undo`)\n    undoEl.addEventListener(\"click\", clickUndo)\n    const eraseEl = document.getElementById(`\\${domPrefix}erase`)\n    eraseEl.addEventListener(\"click\", clickErase)\n\n    jin.createEffect (\"final\", () => {\n      const undoState = JSON.parse( JSON.stringify( jin.getState() ) )\n      undoStates.push(undoState)\n      console.log(\"huh\", undoState.outputContainers.main.content.choices)\n    }, Infinity)\n\n  }\n\n\n  function clickUndo() {\n    if (undoStates.length <= 1) {\n      alert(\"nothing to undo\")\n      return\n    }\n    undoStates.pop()\n    const state = undoStates[undoStates.length - 1]\n    console.log(\"setting state\", state, state.outputContainers.main.content.choices, undoStates)\n    jin.setState(state)\n\n  }\n\n\n  function clickLoad() {\n    const state = localStorage.getItem(\"basicSaveState\")\n    if (!state) {\n      alert(\"Nothing to load.\")\n      return\n    }\n    const stateParsed = JSON.parse(state)\n    jin.setState(stateParsed)\n  }\n\n  function clickSave() {\n    const state = jin.getState()\n    const stateJson = JSON.stringify(state)\n    localStorage.setItem(\"basicSaveState\", stateJson)\n  }\n\n  function clickErase() {\n    localStorage.setItem(\"basicSaveState\", \"\")\n  }\n\n  \n})();","css":"body {\n  background: #fd0 !important;\n\n}"}})