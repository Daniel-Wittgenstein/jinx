$_PLUGIN.add({"isPlugin":true,"appName":"jinx","compatiblewithVersions":["0.1"],"name":"Simple Interface Demo","id":"simpleInterfaceDemo","author":"Jinx Core Team","copyrightInfo":":(c) 2023 Jinx Core Team","version":"0.0.1","licenseShort":"Public Domain","links":[],"licenseText":"I release this into the public domain.","shortInfo":"Simple Interface Demo plugin.","documentation":"","builtIn":true,"enabledByDefault":false,"logo":"<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><g class=\"\" style=\"\" transform=\"translate(0,0)\"><path d=\"M459.15 269.75a133.197 133.197 0 0 1-55.862 179.975l-42.782 22.541-10.52 5.533a71.277 71.277 0 0 1-62.966 1.685l-167.077-71.38 15.733-46.676 99.363 19.194-51.458-97.78-82.843-157.411 40.357-21.232 82.844 157.457 19.934-10.485-36.521-69.445 40.335-21.22 36.52 69.445 19.935-10.485-28.2-53.598 40.358-21.232 28.2 53.598 19.945-10.576-19.354-36.886 40.346-21.174 19.354 36.885 54.348 103.301zM73.268 146.674a60.03 60.03 0 0 1 42.361-102.459 60.098 60.098 0 0 1 56.58 80.169l10.588 20.013A78.29 78.29 0 0 0 115.708 26a78.233 78.233 0 0 0-5.635 156.262L99.428 162.02a59.688 59.688 0 0 1-26.16-15.346z\" fill=\"#fff\" fill-opacity=\"1\"></path></g></svg>","licenseTextMustBeIncludedInFinalGame":false,"bundlerOutputFileName":"simpleinterface","implementation":{"js":";(function() {\r\n\r\n  const pluginName = \"plugin simpleInterface\"\r\n  const domPrefix = \"X-simple-interface-plugin-\"\r\n\r\n  jin.createEffect(\"loadApp\", initStuff, 20)\r\n\r\n  const undoStates = []\r\n\r\n  function initStuff() {\r\n\r\n    if (jin.simpleInterface) {\r\n      jin.error(`Namespace clash: plugin jin.simpleInterface exists already?`)\r\n      return\r\n    }\r\n    const el = document.getElementById(\"app\")\r\n    if (!el) {\r\n      jin.error(`\\${pluginName}: the plugin cannot work without a div with id \"app\"`)\r\n      return\r\n    }\r\n    const bar = document.createElement('div')\r\n    bar.style = `margin-bottom: 20px;`\r\n    bar.innerHTML = `\r\n      <button id=\"\\${domPrefix}load\">load</button>\r\n      <button id=\"\\${domPrefix}save\">save</button>\r\n      <button id=\"\\${domPrefix}erase\">erase</button>\r\n      <button id=\"\\${domPrefix}undo\">undo</button>\r\n    `\r\n    el.prepend(bar)\r\n    const loadEl = document.getElementById(`\\${domPrefix}load`)\r\n    loadEl.addEventListener(\"click\", clickLoad)\r\n    const saveEl = document.getElementById(`\\${domPrefix}save`)\r\n    saveEl.addEventListener(\"click\", clickSave)\r\n    const undoEl = document.getElementById(`\\${domPrefix}undo`)\r\n    undoEl.addEventListener(\"click\", clickUndo)\r\n    const eraseEl = document.getElementById(`\\${domPrefix}erase`)\r\n    eraseEl.addEventListener(\"click\", clickErase)\r\n\r\n    jin.createEffect (\"final\", () => {\r\n      const undoState = JSON.parse( JSON.stringify( jin.getState() ) )\r\n      undoStates.push(undoState)\r\n      console.log(\"huh\", undoState.outputContainers.main.content.choices)\r\n    }, Infinity)\r\n\r\n  }\r\n\r\n\r\n  function clickUndo() {\r\n    if (undoStates.length <= 1) {\r\n      alert(\"nothing to undo\")\r\n      return\r\n    }\r\n    undoStates.pop()\r\n    const state = undoStates[undoStates.length - 1]\r\n    console.log(\"setting state\", state, state.outputContainers.main.content.choices, undoStates)\r\n    jin.setState(state)\r\n\r\n  }\r\n\r\n\r\n  function clickLoad() {\r\n    const state = localStorage.getItem(\"basicSaveState\")\r\n    if (!state) {\r\n      alert(\"Nothing to load.\")\r\n      return\r\n    }\r\n    const stateParsed = JSON.parse(state)\r\n    jin.setState(stateParsed)\r\n  }\r\n\r\n  function clickSave() {\r\n    const state = jin.getState()\r\n    const stateJson = JSON.stringify(state)\r\n    localStorage.setItem(\"basicSaveState\", stateJson)\r\n  }\r\n\r\n  function clickErase() {\r\n    localStorage.setItem(\"basicSaveState\", \"\")\r\n  }\r\n\r\n  \r\n})();","css":"body {\r\n  background: #fd0 !important;\r\n\r\n}"}})